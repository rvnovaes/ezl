{% extends 'skeleton/forms/base.html' %}
{% load static %}

{% block extra_stylesheets %}
	<link rel="stylesheet" type="text/css" href="{% static 'skeleton/plugins/bower_components/multiselect/css/multi-select.css' %}">

	<style type="text/css">
		.search-input {			
			width: 100%;
			margin-bottom: 5px;
		}		
	</style>
{% endblock %}


{% block extra_scripts %} 
	<script src="{% static 'skeleton/plugins/bower_components/multiselect/js/jquery.multi-select.js' %}"></script>
	<script src="{% static 'skeleton/plugins/bower_components/jquery.quicksearch/dist/jquery.quicksearch.js' %}"></script>	
	<script type="text/javascript">
		$(document).ready(function() {
		  $('#id_users').multiSelect({
		    selectableHeader: "<input type='text' class='search-input' autocomplete='off' placeholder='Pesquisar...'>",
		    selectionHeader: "<input type='text' class='search-input' autocomplete='off' placeholder='Pesquisar...'>",
		    afterInit: function(ms) {
		      var that = this,		      
		        $selectableSearch = that.$selectableUl.prev(),
		        $selectionSearch = that.$selectionUl.prev(),
		        selectableSearchString = '#' + that.$container.attr('id') + ' .ms-elem-selectable:not(.ms-selected)',
		        selectionSearchString = '#' + that.$container.attr('id') + ' .ms-elem-selection.ms-selected';
		      that.qs1 = $selectableSearch.quicksearch(selectableSearchString)
		        .on('keydown', function(e) {
		          if (e.which === 40) {
		            that.$selectableUl.focus();
		            return false;
		          }
		        });
		      that.qs2 = $selectionSearch.quicksearch(selectionSearchString)
		        .on('keydown', function(e) {
		          if (e.which === 40) {
		            that.$selectionUl.focus();
		            return false;
		          }
		        })
		    },
		    afterSelect: function() {
		      this.qs1.cache();
		      this.qs2.cache();
		    },
		    afterDeselect: function() {
		      this.qs1.cache();
		      this.qs2.cache();
		    }
		  })
		})
	</script>
{% endblock %}