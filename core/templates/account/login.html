{% extends 'base.html' %}
{% load static %}
{% block body %}
     {% include 'core/widgets/messages.html' %}
<link rel="stylesheet" type="text/css"
      href="{% static "login.css" %}">
<script src="{% static "js/login.js" %}"></script>
<div class="materialContainer">
    <div class="box">

        <div class="title"><img width="325px" class="img-responsive" src="{% static "img/logo_ezl.png" %}"></div>
        <form method="POST" action="{% url 'account_login' %}"> {% csrf_token %}

            <div class="input">
                <label for="first_name">Login</label>
                <input id="first_name" type="text" name="login" required>
                <span class="spin"></span>
            </div>

            <div class="input">
                <label for="password">Senha</label>
                <input id="password" type="password" name="password" required>
                <span class="spin"></span>
            </div>
            {% if redirect_field_value %}
                <input type="hidden" name="{{ redirect_field_name }}"
                       value="{{ redirect_field_value }}"/>
            {% endif %}
            <div class="button login">
                <button type="submit" ><span>Entrar</span><i class="fa fa-check"></i></button>
            </div>
            <a href="/accounts/password/reset/" class="pass-forgot">Recuperar a senha</a>
            <a href="{% url 'recover_database' %}" class="pass-forgot">Recuperar Banco de Dados</a>

        </form>

        <div style="padding-top: 30px" class="pass-forgot"><label >Desenvolvido por:</label> <img
                onclick="window.open('http://www.mttech.com.br')"
                src="/static/img/logo.png" height="20"
                style="cursor: pointer; cursor: hand;"/>
        </div>
    </div>

    <div class="overbox">
        <div class="material-button alt-2"><span class="shape"></span></div>

        <div class="title">Registrar</div>

        <div class="input">
            <label for="regname">Login</label>
            <input type="text" name="regname" id="regname">
            <span class="spin"></span>
        </div>

        <div class="input">
            <label for="regpass">Senha</label>
            <input type="password" name="regpass" id="regpass">
            <span class="spin"></span>
        </div>

        <div class="input">
            <label for="reregpass">Repetir Senha</label>
            <input type="password" name="reregpass" id="reregpass">
            <span class="spin"></span>
        </div>
        <div class="button">
            <button><span>Próximo</span></button>
        </div>


    </div>

</div>
{% endblock %}
{% block javascript %}
    <script type="text/javascript">
        $(document).ready(function() {
            // Função timeout utilizada para dar um tempo para o navegador carregar os valores de autofill.
            // Caso exista um usuário preenchido (casos de senha salva), o navegador passa o foco pelos campos de usuário e senha
            setTimeout(function() {
                if($("#first_name").val() && $("#first_name").val() !== $("#first_name").attr("value")){
                    $("#first_name").focus();
                    $("#password").focus();
                };
            },500);
        });
    </script>
{% endblock %}