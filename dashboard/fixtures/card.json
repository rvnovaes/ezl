[
{
    "model": "dashboard.card",
    "pk": 1,
    "fields": {
        "name": "TOTAL AUDI\u00caNCIAS",
        "code": "from lawsuit.models import Folder\r\nfrom task.models import Task\r\nfrom random import randint\r\n\r\nfolders = Folder.objects.filter(person_customer__company=self.company)\r\ntasks = Task.objects.filter(movement__folder__in=folders, type_task__type_task_main__is_hearing=True)\r\n\r\nresult = {\r\n\t'title': 'TOTAL DE AUDI\u00caNCIAS', \r\n  \t'subtitle': 'Audi\u00eancias no Ezlayer', \r\n  \t'value': tasks.count(), \r\n  \t'percent': 100\r\n}",
        "schema": "{\"title\": \"string\", \"subtitle\": \"string\", \"value\": \"string\", \"percent\": \"string\", \"direction\": \"string\"}"
    }
},
{
    "model": "dashboard.card",
    "pk": 2,
    "fields": {
        "name": "AUDI\u00caNCIAS NO M\u00caS",
        "code": "from django.utils import timezone\r\nfrom task.models import Task\r\nfrom lawsuit.models import Folder\r\n\r\nfolders = Folder.objects.filter(person_customer__company=self.company)\r\ntasks_this_month = Task.objects.filter(\r\n   movement__folder__in=folders, \r\n   type_task__type_task_main__is_hearing=True,\r\n   final_deadline_date__year=timezone.now().year,\r\n   final_deadline_date__month=timezone.now().month\r\n )\r\n\r\ntasks_older_month = Task.objects.filter(\r\n   movement__folder__in=folders, \r\n   type_task__type_task_main__is_hearing=True,\r\n   final_deadline_date__year=timezone.now().year,\r\n   final_deadline_date__month=timezone.now().month -1\r\n )\r\n\r\ndifference = tasks_this_month.count() - tasks_older_month.count()\r\npercent = 0\r\nif tasks_older_month:\r\n\tpercent = (difference.__abs__() / tasks_older_month.count()) * 100\r\ndirection = 'down'\r\n\r\n\r\nif (tasks_older_month.count() < tasks_this_month.count()):\r\n  direction = 'up'\r\n  \r\nresult = {\r\n\t'title': 'AUDI\u00caNCIAS NO M\u00caS', \r\n  \t'subtitle': get_month(), \r\n  \t'value': tasks_this_month.count(), \r\n  \t'percent': '%0.2f' %percent,\r\n    'direction': direction  \t\r\n}",
        "schema": "{\"title\": \"string\", \"subtitle\": \"string\", \"value\": \"string\", \"percent\": \"string\", \"direction\": \"string\"}"
    }
},
{
    "model": "dashboard.card",
    "pk": 3,
    "fields": {
        "name": "AUDI\u00caNCIAS DA SEMANA",
        "code": "from django.utils import timezone\r\nfrom task.models import Task\r\nfrom lawsuit.models import Folder\r\n\r\nfolders = Folder.objects.filter(person_customer__company=self.company)\r\ntasks_this_week = Task.objects.filter(\r\n   movement__folder__in=folders, \r\n   type_task__type_task_main__is_hearing=True,\r\n   final_deadline_date__year=timezone.now().year,   \r\n   final_deadline_date__week=timezone.now().isocalendar()[1]\r\n )\r\n\r\ntasks_older_week= Task.objects.filter(\r\n   movement__folder__in=folders, \r\n  type_task__type_task_main__is_hearing=True,\r\n   final_deadline_date__year=timezone.now().year,   \r\n   final_deadline_date__week=timezone.now().isocalendar()[1] -1\r\n )\r\n\r\ndifference = tasks_this_week.count() - tasks_older_week.count()\r\npercent = 0\r\nif tasks_older_week:\r\n\tpercent = (difference.__abs__() / tasks_older_week.count()) * 100\r\ndirection = 'down'\r\n\r\n\r\nif (tasks_older_week.count() < tasks_this_week.count()):\r\n  direction = 'up'\r\n  \r\nresult = {\r\n\t'title': 'AUDI\u00caNCIAS NA SEMANA', \r\n  \t'subtitle': get_month(), \r\n  \t'value': tasks_this_week.count(), \r\n  \t'percent': '%0.2f' %percent,\r\n    'direction': direction  \t\r\n}",
        "schema": "{\"title\": \"string\", \"subtitle\": \"string\", \"value\": \"string\", \"percent\": \"string\", \"direction\": \"string\"}"
    }
},
{
    "model": "dashboard.card",
    "pk": 4,
    "fields": {
        "name": "TOTAL ACORDOS NO M\u00caS",
        "code": "from django.utils import timezone\r\nfrom task.models import Task\r\nfrom lawsuit.models import Folder\r\n\r\nfolders = Folder.objects.filter(person_customer__company=self.company)\r\ntasks_this_month = Task.objects.filter(\r\n   movement__folder__in=folders, \r\n   type_task__type_task_main__is_hearing=True,\r\n   final_deadline_date__year=timezone.now().year,\r\n   final_deadline_date__month=timezone.now().month\r\n )\r\n\r\ntasks_older_month = Task.objects.filter(\r\n   movement__folder__in=folders, \r\n   type_task__type_task_main__is_hearing=True,\r\n   final_deadline_date__year=timezone.now().year,\r\n   final_deadline_date__month=timezone.now().month -1\r\n )\r\n\r\nagreement_this_month = tasks_this_month.filter(\r\n  **{'survey_result__Acordo realizado?': 'Sim'})\r\n\r\nagreement_old_month = tasks_older_month.filter(\r\n  **{'survey_result__Acordo realizado?': 'Sim'})\r\n\r\n\r\ndifference = agreement_this_month.count() - agreement_old_month.count()\r\npercent = 0\r\nif agreement_old_month:\r\n  percent = (difference.__abs__() / agreement_old_month.count()) * 100\r\ndirection = 'down'\r\n\r\n\r\nif (agreement_old_month.count() < agreement_this_month.count()):\r\n  direction = 'up'\r\n  \r\nresult = {\r\n\t'title': 'TOTAL DE ACORDOS', \r\n  \t'subtitle': get_month(), \r\n  \t'value': agreement_this_month.count(), \r\n  \t'percent': '%0.2f' %percent,\r\n    'direction': direction  \t\r\n}",
        "schema": "{\"title\": \"string\", \"subtitle\": \"string\", \"value\": \"string\", \"percent\": \"string\", \"direction\": \"string\"}"
    }
}
]
